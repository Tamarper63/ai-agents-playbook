{% assign purl = page.url | default: '' %}

<nav class="site-nav" aria-label="Primary">
  <div class="site-nav__inner">
    {% for item in site.data.nav.items %}
      {% assign is_cta = false %}
      {% if item.cta == true or item.is_cta == true %}
        {% assign is_cta = true %}
      {% endif %}

      {% unless is_cta %}
        {% assign is_active = false %}
        {% assign item_url = item.url | default: '' %}
        {% assign ac = item.active_contains | default: '' %}

        {% if item_url != '' and purl == item_url %}
          {% assign is_active = true %}
        {% elsif ac != '' and purl contains ac %}
          {% assign is_active = true %}
        {% endif %}

        {% if is_active %}
          <a href="{{ item.url | relative_url }}" aria-current="page">{{ item.label }}</a>
        {% else %}
          <a href="{{ item.url | relative_url }}">{{ item.label }}</a>
        {% endif %}
      {% endunless %}
    {% endfor %}
  </div>
</nav>