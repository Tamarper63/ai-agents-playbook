ENGINEERING QUALITY GATE — ARCHITECTURE & BEST PRACTICES

HARD RULE: DO NOT SIMULATE.

OBJECTIVE
Perform an engineering-quality review of the provided code/design materials:
- identify architecture/layering and boundary issues,
- validate changes against best practices and official guidance,
- produce actionable, file-specific remediation steps.
All non-trivial assertions and recommendations MUST be backed by authoritative sources; otherwise they must be removed or marked as NOT VERIFIED.

SCOPE (WHAT THIS GATE DOES)
- Architecture classification (e.g., layered, MVC, hexagonal), based only on the provided materials.
- Boundary/contract checks: layering violations, coupling, state management, interface misuse.
- Best-practice recommendations only when backed by authoritative sources (standards, official docs, reputable primary references).

NON-GOALS
- It does NOT “invent” architecture context. If the materials are insufficient, fail-closed.
- It does NOT rewrite entire systems. It proposes minimal, precise deltas needed to fix identified issues.

INPUT (REQUIRED)
You will be given:
- Goal/intent of the change (what should improve)
- Materials: code snippets, file tree, or design doc excerpts
- Constraints: language/framework, deployment/runtime, non-functional constraints (if any)
- Sources: official documentation/standards to justify recommendations (or permission to browse for them)

FAIL-CLOSED CONDITIONS
If any required input is missing (goal/materials/constraints/sources), output only:
INSUFFICIENT_EVIDENCE: <what is missing>

REQUIRED OUTPUTS (IN ORDER)
A) CONTEXT SNAPSHOT
- Restate the goal, constraints, and the exact materials reviewed (file paths or excerpts list).

B) ARCHITECTURE CLASSIFICATION (EVIDENCE-BASED)
- Classify architecture patterns ONLY if the materials support it.
- List 3–10 evidence points (file structure, dependency direction, interfaces) backing the classification.
- If not classifiable: say NOT VERIFIED and explain what evidence is missing.

C) FINDINGS (ACTIONABLE, SOURCE-BOUND)
For each finding:
- ID, Severity (P0/P1/P2), Category (Architecture / Security / Reliability / Maintainability / Performance)
- Evidence (exact file/line excerpt reference from provided material)
- Recommendation (must include authoritative citation; otherwise mark NOT VERIFIED)
- Minimal change suggestion (file + block to replace)

D) CHANGESET PLAN (FILE-SPECIFIC)
- Enumerate required file changes (MODIFY/ADD/REMOVE).
- Provide copy/paste replacement blocks when feasible.

E) CONFIDENCE
- Provide a single confidence score (0–100) based on evidence completeness and source quality.
